<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Leads API Test</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .result { background: #f5f5f5; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .error { background: #ffebee; border: 1px solid #f44336; }
        .success { background: #e8f5e9; border: 1px solid #4caf50; }
    </style>
</head>
<body>
    <h1>Admin Leads API Test</h1>
    
    <button id="test-leads-api">Test Leads API</button>
    <button id="test-options-api">Test Options API</button>
    <button id="clear-results">Clear Results</button>
    
    <div id="results"></div>

    <script>
    $(document).ready(function() {
        
        $('#test-leads-api').click(function() {
            addResult('Testing /api/admin/leads endpoint...', 'info');
            
            $.ajax({
                url: '/api/admin/leads',
                method: 'GET',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                }
            })
            .done(function(response) {
                addResult('SUCCESS: API Response received', 'success');
                addResult('Response: ' + JSON.stringify(response, null, 2), 'info');
            })
            .fail(function(xhr) {
                if (xhr.status === 401) {
                    addResult('EXPECTED: Authentication required (401) - API is working!', 'success');
                } else {
                    addResult('ERROR: ' + xhr.status + ' - ' + xhr.responseText, 'error');
                }
                addResult('Full response: ' + JSON.stringify(xhr.responseJSON, null, 2), 'info');
            });
        });
        
        $('#test-options-api').click(function() {
            addResult('Testing /api/admin/leads/options endpoint...', 'info');
            
            $.ajax({
                url: '/api/admin/leads/options',
                method: 'GET',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                }
            })
            .done(function(response) {
                addResult('SUCCESS: Options API Response received', 'success');
                addResult('Response: ' + JSON.stringify(response, null, 2), 'info');
            })
            .fail(function(xhr) {
                if (xhr.status === 401) {
                    addResult('EXPECTED: Authentication required (401) - API is working!', 'success');
                } else {
                    addResult('ERROR: ' + xhr.status + ' - ' + xhr.responseText, 'error');
                }
            });
        });
        
        $('#clear-results').click(function() {
            $('#results').empty();
        });
        
        function addResult(message, type) {
            const timestamp = new Date().toLocaleTimeString('tr-TR');
            const resultDiv = $('<div class="result ' + type + '">')
                .html('<strong>[' + timestamp + ']</strong> ' + message);
            $('#results').append(resultDiv);
        }
        
        // Auto test on load
        addResult('Page loaded. jQuery version: ' + $.fn.jquery, 'success');
        addResult('Ready to test APIs. Click buttons above.', 'info');
    });
    </script>
</body>
</html>